!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return o}));var n=i(0),r=i.n(n),s=i(1),a=i.n(s),o=function(){function t(e,i){r()(this,t),this.$=i,this.settings=e,this.id=e.container.attr("id"),this.container=e.container,this.layout=this.container.attr("data-layout"),this.type="fixed",this.timestamp=!1,this.timezone=null,this._timeInterval="",this.initCountdown()}return a()(t,[{key:"convertIsoToStandard",value:function(t){var e=t.toString().split("T");if(void 0===e[1]||null!==t.toString().match(/\s/g))return t;var i=e[0].split("-");return new Date("".concat(i[1],"/").concat(i[2],"/").concat(i[0]," ").concat(e[1]))}},{key:"getTimeRemaining",value:function(t){var e=Date.parse(t)-Date.parse(new Date),i=Math.floor(e/1e3%60),n=Math.floor(e/1e3/60%60),r=Math.floor(e/36e5%24),s=Math.floor(e/864e5);return"fixed"===this.type&&(0===this.dateWrapper.length&&0===this.hoursWrapper.length?n+=60*(r+=24*s):0===this.dateWrapper.length?r+=24*s:0===this.hoursWrapper.length&&(n+=60*r)),{total:e,days:s<10?"0"+s:s,hours:r<100?("0"+r).slice(-2):r,minutes:n<100?("0"+n).slice(-2):n,seconds:("0"+i).slice(-2)}}},{key:"setTimeRemaining",value:function(){var t=this.getTimeRemaining(this.timestamp),e={days:this.dateWrapper,hours:this.hoursWrapper,minutes:this.minutesWrapper,seconds:this.secondsWrapper},i={days:this.dateLabel,hours:this.hoursLabel,minutes:this.minutesLabel,seconds:this.secondsLabel};t.total<=0?(clearInterval(this._timeInterval),this.$.each(e,(function(t,e){e.length>0&&(e.find(".ib-countdown-unit-number").html("00"),e.find(".ib-number").hide())})),this.resetCountdown(),this.runActions()):(this.$.each(e,(function(e,n){if(n.length>0){n.find(".ib-countdown-unit-number").html(t[e]);var r=n.find(".ib-countdown-unit-label"),s=1!=parseInt(t[e])?i[e].plural:i[e].singular;r.html(s),n.find(".ib-number").show()}})),this.container.find(".ib-countdown-msg").hide(),this.container.find(".ib-countdown-time").show())}},{key:"runActions",value:function(){if(this.container.trigger("countdown_expire",this.container),this.container.find(".ib-countdown-msg").show(),JSON.parse(this.hide)&&this.container.find(".ib-countdown-time").hide(),this.container.find(".ib-countdown-redirect").length>0){var t=this.container.find(".ib-countdown-redirect").val();""===t||this.$("body").hasClass("wp-admin")||(location.href=t)}}},{key:"setCircleCount",value:function(){var t=this.getTimeRemaining(this.timestamp),e={days:365,hours:24,minutes:60,seconds:60},i={days:this.dateWrapper.find("svg"),hours:this.hoursWrapper.find("svg"),minutes:this.minutesWrapper.find("svg"),seconds:this.secondsWrapper.find("svg")};this.$.each(i,(function(i,n){if(n.length>0){var r=n.find(".ib-number"),s=r.attr("r"),a=Math.PI*(2*s),o=(1-t[i]/e[i])*a;r.css({strokeDashoffset:o})}}))}},{key:"fixCircleAttrs",value:function(){if(0!==this.wrapper.find("circle").length){var t=this;this.wrapper.find("circle").each((function(){var e=t.$(this).attr("strokedasharray"),i=t.$(this).attr("strokedashoffset");void 0!==e&&t.$(this).removeAttr("strokedasharray").attr("stroke-dasharray",e),void 0!==i&&t.$(this).removeAttr("strokedashoffset").attr("stroke-dashoffset",i)}))}}},{key:"resetCountdown",value:function(){this.initElements();var t={days:this.dateWrapper,hours:this.hoursWrapper,minutes:this.minutesWrapper,seconds:this.secondsWrapper};clearInterval(this._timeInterval),this.$.each(t,(function(t,e){e.length>0&&(e.find(".ib-countdown-unit-number").html("00"),e.find(".ib-number").hide())}))}},{key:"setTimeZone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==t&&(this.container.attr("data-timezone",t),this.initCountdown())}},{key:"initElements",value:function(){this.wrapper=this.container.find(".ib-countdown"),this.dateWrapper=this.container.find(".ib-countdown-days"),this.dateLabel=this.dateWrapper.find(".ib-countdown-unit-label").data("label"),this.hoursWrapper=this.container.find(".ib-countdown-hours"),this.hoursLabel=this.hoursWrapper.find(".ib-countdown-unit-label").data("label"),this.minutesWrapper=this.container.find(".ib-countdown-minutes"),this.minutesLabel=this.minutesWrapper.find(".ib-countdown-unit-label").data("label"),this.secondsWrapper=this.container.find(".ib-countdown-seconds"),this.secondsLabel=this.secondsWrapper.find(".ib-countdown-unit-label").data("label"),this.type=JSON.parse(this.container.attr("data-fixed"))?"fixed":"evergreen",this.layout=this.container.attr("data-layout"),this.hide=this.container.attr("data-hide")}},{key:"initEvergreen",value:function(){var t=this.id+"-evergreen-endtime",e=this.timestamp.split(",")[0],i=this.timestamp.split(",")[1].split(":"),n=Math.floor(24*e*60*60),r=Math.floor(60*i[0]*60),s=Math.floor(60*i[1]),a=Math.floor(i[2]),o=Date.now()+1e3*(n+r+s+a);this.timestamp=new Date(o),localStorage.setItem(t,o)}},{key:"initTimestamp",value:function(){if(this.timestamp=this.container.attr("data-time"),this.timezone=this.container.attr("data-timezone"),"evergreen"===this.type){var t=this.id+"-evergreen-endtime",e=localStorage.getItem(t);null===e&&this.initEvergreen(),null!==e&&e>0&&(this.timestamp=new Date(parseInt(e)))}void 0!==this.timezone&&null!==this.timezone&&(this.timestamp+=this.timezone),this.timestamp&&void 0!==this.timestamp?this.timestamp=this.convertIsoToStandard(this.timestamp):this.timestamp=new Date((new Date).getTime()+864e5)}},{key:"initCountdown",value:function(){this.initElements();var t=this;0!==this.wrapper.length&&(this.resetCountdown(),this.initTimestamp(),this.fixCircleAttrs(),this.setTimeRemaining(),"circle"==this.layout&&this.setCircleCount(),clearInterval(this._timeInterval),this._timeInterval=setInterval((function(){t.setTimeRemaining(),"circle"==t.layout&&t.setCircleCount()}),1e3))}}]),t}();!function(t){window.ibCountdown=window.ibCountdown||{};var e=function(){t(".ib-block-countdown").each((function(){var e=t(this).attr("id");void 0!==window.ibCountdown[e]?window.ibCountdown[e].initCountdown():window.ibCountdown[e]=new o({container:t(this)},t)}))};window.ibCountdown._init=e,void 0!==wp.domReady?wp.domReady(e):t(document).ready(e)}(jQuery)}]);